{"ast":null,"code":"import _classCallCheck from\"D:/\\u524D\\u7AEF\\u9879\\u76EE/\\u5C1A\\u9633\\u4E92\\u52A8\\u5B98\\u7F51/official-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/\\u524D\\u7AEF\\u9879\\u76EE/\\u5C1A\\u9633\\u4E92\\u52A8\\u5B98\\u7F51/official-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/\\u524D\\u7AEF\\u9879\\u76EE/\\u5C1A\\u9633\\u4E92\\u52A8\\u5B98\\u7F51/official-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/\\u524D\\u7AEF\\u9879\\u76EE/\\u5C1A\\u9633\\u4E92\\u52A8\\u5B98\\u7F51/official-website/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from\"react\";import\"./fullpage.css\";import PubSub from'pubsub-js';//引入消息订阅\n// import { throttle } from \"utils/loadash\"; //暂不节流\n//\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Fullpage=/*#__PURE__*/function(_React$Component){_inherits(Fullpage,_React$Component);var _super=_createSuper(Fullpage);function Fullpage(props){var _this;_classCallCheck(this,Fullpage);_this=_super.call(this,props);_this.debounceHandleScroll=function(e){e.persist();_this.handleScroll(e);// console.log(e)\n};_this.state={currentPage:1,pageList:_this.props.children};_this.initPageListFromPropsChildren();// 类似于vue的插槽，props带过来的children（FullpageItem）\n// this.handleScroll = throttle(this.handleScroll, 600, true); //屏幕滚动时的节流函数\nreturn _this;}_createClass(Fullpage,[{key:\"componentDidMount\",value:// componentDidMount() {\n//     console.log(this.state.currentPage);\n// }\n// componentDidUpdate(){ //发布消息   当state状态更新就发布消息\n//     const result = this.state.currentPage;//当前的页码\n//     // PubSub.publish('page',result)\n//     // console.log(result);\n//     if(result===2){\n//         PubSub.publish('page',result)\n//         // this.setState({result: result});\n//         // console.log('wdww')\n//     }\n// }\nfunction componentDidMount(){var _this2=this;PubSub.subscribe('toppage',function(msg,data){//快速跳回顶部\nvar currentPage=_this2.state.currentPage;_this2.setState({currentPage:data});// this.setState({data:toppage})\n// console.log('什么',toppage)\n// console.log(data)//固定的页码数\n// console.log(this.aa)\n});}},{key:\"changeCurrentPage\",value:function changeCurrentPage(index){this.setState({currentPage:index});}},{key:\"handleScroll\",value:function handleScroll(e){var result=this.state.currentPage;if(e.deltaY>0){PubSub.publish('page',result+1);// console.log(e.deltaY,'鼠标往下滚动了')\n// console.log(this.state.currentPage)-------------------------------------------\nif(this.state.currentPage===this.state.pageList.length)return;this.changeCurrentPage(this.state.currentPage+1);}else{// console.log(e.deltaY,'鼠标往上滚动了')\nPubSub.publish('page',result-1);if(this.state.currentPage===1)return;this.changeCurrentPage(this.state.currentPage-1);}}},{key:\"initPageListFromPropsChildren\",value:function initPageListFromPropsChildren(){// 初始化pageList（插槽）\nif(this.state.pageList===undefined)this.setState({pageList:[]});if(typeof pageList===\"object\"&&this.state.pageList.length===undefined)this.setState({pageList:[this.state.pageList]});}},{key:\"render\",value:function render(){var _this3=this;return/*#__PURE__*/_jsx(\"div\",{className:\"fullpage\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"fullpage_container\",onWheel:this.debounceHandleScroll,children:[this.state.pageList.map(function(x,i){return/*#__PURE__*/_jsx(\"div\",{className:\"fullpage_item item_\".concat(i+1),style:{top:-_this3.state.currentPage+i+1+\"00vh\"},children:x},i);}),/*#__PURE__*/_jsx(\"div\",{className:\"point_nav\",children:this.state.pageList.map(function(x,i){return/*#__PURE__*/_jsx(\"div\",{className:\"point_nav_item\",style:{background:i+1===_this3.state.currentPage?\"#333\":\"#cccaca\"},onMouseEnter:function onMouseEnter(){return _this3.changeCurrentPage(i+1);}},i);})})]})});}}]);return Fullpage;}(React.Component);var FullpageItem=function FullpageItem(props){var children=props.children;return/*#__PURE__*/_jsx(\"div\",{style:{height:\"100%\",width:\"100%\"},children:children});};export{Fullpage,FullpageItem};","map":{"version":3,"sources":["D:/前端项目/尚阳互动官网/official-website/src/components/fullpage/fullpage.jsx"],"names":["React","PubSub","Fullpage","props","debounceHandleScroll","e","persist","handleScroll","state","currentPage","pageList","children","initPageListFromPropsChildren","subscribe","msg","data","setState","index","result","deltaY","publish","length","changeCurrentPage","undefined","map","x","i","top","background","Component","FullpageItem","height","width"],"mappings":"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","sourcesContent":["    import React from \"react\";\r\n    import \"./fullpage.css\";\r\n    import PubSub from 'pubsub-js' //引入消息订阅\r\n    // import { throttle } from \"utils/loadash\"; //暂不节流\r\n\r\n    //\r\n\r\n    class Fullpage extends React.Component {\r\n\r\n        // componentDidMount() {\r\n        //     console.log(this.state.currentPage);\r\n        // }\r\n        // componentDidUpdate(){ //发布消息   当state状态更新就发布消息\r\n        //     const result = this.state.currentPage;//当前的页码\r\n        //     // PubSub.publish('page',result)\r\n        //     // console.log(result);\r\n        //     if(result===2){\r\n        //         PubSub.publish('page',result)\r\n        //         // this.setState({result: result});\r\n        //         // console.log('wdww')\r\n        //     }\r\n        // }\r\n        componentDidMount(){\r\n            PubSub.subscribe('toppage',(msg,data)=>{ //快速跳回顶部\r\n                const currentPage = this.state.currentPage\r\n                this.setState({currentPage:data})\r\n                \r\n                \r\n                // this.setState({data:toppage})\r\n                // console.log('什么',toppage)\r\n                // console.log(data)//固定的页码数\r\n                // console.log(this.aa)\r\n            })\r\n        }\r\n\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        currentPage: 1,\r\n        pageList: this.props.children,\r\n        };\r\n\r\n        this.initPageListFromPropsChildren(); // 类似于vue的插槽，props带过来的children（FullpageItem）\r\n        // this.handleScroll = throttle(this.handleScroll, 600, true); //屏幕滚动时的节流函数\r\n    }\r\n    debounceHandleScroll = (e) => {\r\n        e.persist();\r\n        this.handleScroll(e);\r\n        // console.log(e)\r\n    };\r\n    changeCurrentPage(index) {\r\n        this.setState({ currentPage: index });\r\n    }\r\n    handleScroll(e) {\r\n        const result = this.state.currentPage\r\n        if (e.deltaY > 0) {  \r\n            PubSub.publish('page',result+1)\r\n            // console.log(e.deltaY,'鼠标往下滚动了')\r\n            // console.log(this.state.currentPage)-------------------------------------------\r\n        if (this.state.currentPage === this.state.pageList.length) return;\r\n        this.changeCurrentPage(this.state.currentPage + 1);\r\n        } else {\r\n            // console.log(e.deltaY,'鼠标往上滚动了')\r\n            PubSub.publish('page',result-1)\r\n        if (this.state.currentPage === 1) return;\r\n        this.changeCurrentPage(this.state.currentPage - 1);\r\n        }\r\n    }\r\n    initPageListFromPropsChildren() {\r\n        // 初始化pageList（插槽）\r\n        if (this.state.pageList === undefined) this.setState({ pageList: [] });\r\n        if (\r\n        typeof pageList === \"object\" &&\r\n        this.state.pageList.length === undefined\r\n        )\r\n        this.setState({ pageList: [this.state.pageList] });\r\n    }\r\n    render() {\r\n            return (\r\n                <div className=\"fullpage\">\r\n                    <div className=\"fullpage_container\" onWheel={this.debounceHandleScroll}>\r\n                    {this.state.pageList.map((x, i) => (\r\n                    <div\r\n                        className={`fullpage_item item_${i + 1}`}\r\n                        key={i}\r\n                        style={{\r\n                        top: -this.state.currentPage + i + 1 + \"00vh\",\r\n                        }}\r\n                    >\r\n                        {x}\r\n                    </div>\r\n                    ))}\r\n                    <div className=\"point_nav\">\r\n                    {this.state.pageList.map((x, i) => (\r\n                        <div\r\n                        className=\"point_nav_item\"\r\n                        style={{\r\n                            background:\r\n                            i + 1 === this.state.currentPage ? \"#333\" : \"#cccaca\",\r\n                        }}\r\n                        key={i}\r\n                        onMouseEnter={() => this.changeCurrentPage(i + 1)}\r\n                        ></div>\r\n                    ))}\r\n                    </div>\r\n                </div>\r\n                </div>\r\n                \r\n            );\r\n            }\r\n        }\r\n    const FullpageItem = (props) => {\r\n    let { children } = props;\r\n    return <div style={{ height: \"100%\", width: \"100%\" }}>{children}</div>;\r\n    };\r\n    export { Fullpage, FullpageItem };"]},"metadata":{},"sourceType":"module"}