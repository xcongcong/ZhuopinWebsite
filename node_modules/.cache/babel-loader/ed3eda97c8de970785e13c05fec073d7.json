{"ast":null,"code":"import \"antd/es/button/style/css\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/form/style/css\";\nimport _Form from \"antd/es/form\";\nimport \"antd/es/input/style/css\";\nimport _Input from \"antd/es/input\";\nimport \"antd/es/message/style/css\";\nimport _message from \"antd/es/message\";\nvar _jsxFileName = \"D:\\\\\\u524D\\u7AEF\\u9879\\u76EE\\\\\\u5C1A\\u9633\\u4E92\\u52A8\\u5B98\\u7F51\\\\official-website\\\\src\\\\components\\\\login\\\\index.jsx\";\nimport React, { Component } from 'react';\nimport './index.css';\nimport close from './images/guanbi.png';\nimport PubSub from 'pubsub-js'; //引入发布消息\n\nimport reqLogin from '../../api/index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Login extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      data: ''\n    };\n\n    this.CloseLogin = () => {\n      // alert('关闭')\n      PubSub.publish('Close-login', false); //发布消息\n    };\n\n    this.onFinish = values => {\n      //表单验证成功的回调\n      // console.log('Success:', values);\n      console.log(values);\n      reqLogin();\n\n      _message.success('登陆成功'); //replace跳转到页面\n\n\n      this.state.data.history.replace('/admin');\n    };\n\n    this.onFinishFailed = errorInfo => {\n      console.log(errorInfo);\n\n      _message.error('登陆出错,请重试');\n    };\n  }\n\n  componentDidMount() {\n    PubSub.subscribe('tiaozhuan', (msg, data) => {\n      this.setState({\n        data\n      });\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"login-bg\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"login-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: close,\n          alt: \"guanbi\",\n          onClick: this.CloseLogin\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          children: \"\\u7528\\u6237\\u767B\\u9646\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(_Form, {\n          // layout='inline'\n          labelAlign: \"left\",\n          name: \"basic\",\n          labelCol: {\n            span: 7\n          },\n          wrapperCol: {\n            span: 20\n          },\n          initialValues: {\n            remember: true\n          },\n          onFinish: this.onFinish,\n          onFinishFailed: this.onFinishFailed,\n          autoComplete: \"off\",\n          children: [/*#__PURE__*/_jsxDEV(_Form.Item, {\n            label: \"\\u8D26\\u6237\",\n            name: \"username\",\n            rules: [{\n              required: true,\n              message: '用户名不能为空!'\n            }, {\n              min: 4,\n              message: '用户名不低于四位'\n            }, {\n              max: 12,\n              message: '用户名最长不高于十二位'\n            }, {\n              pattern: /^[a-zA-Z0-9_]+$/,\n              message: '用户名必须是英文、数字或下划线组成'\n            }],\n            children: /*#__PURE__*/_jsxDEV(_Input, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 75,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n            label: \"\\u5BC6\\u7801\",\n            name: \"password\",\n            rules: [{\n              required: true,\n              message: '密码不能为空！'\n            }, {\n              min: 4,\n              message: '密码不低于四位'\n            }, {\n              max: 12,\n              message: '密码最长不高于十二位'\n            }, {\n              pattern: /^[a-zA-Z0-9_]+$/,\n              message: '密码必须是英文、数字或下划线组成'\n            }],\n            children: /*#__PURE__*/_jsxDEV(_Input.Password, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 88,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(_Form.Item, {\n            wrapperCol: {\n              offset: 8,\n              span: 16\n            },\n            children: /*#__PURE__*/_jsxDEV(_Button, {\n              type: \"primary\",\n              htmlType: \"submit\",\n              className: \"login-form-button\",\n              children: \"\\u767B\\u9646\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 99,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 47,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["D:/前端项目/尚阳互动官网/official-website/src/components/login/index.jsx"],"names":["React","Component","close","PubSub","reqLogin","Login","state","data","CloseLogin","publish","onFinish","values","console","log","success","history","replace","onFinishFailed","errorInfo","error","componentDidMount","subscribe","msg","setState","render","span","remember","required","message","min","max","pattern","offset"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport { Form, Input, Button,message } from 'antd';\r\nimport './index.css'\r\nimport close from './images/guanbi.png'\r\n\r\nimport PubSub from 'pubsub-js' //引入发布消息\r\n\r\nimport reqLogin from '../../api/index'\r\n\r\nexport default class Login extends Component {\r\n            state = {\r\n                data:'',\r\n            }\r\n            componentDidMount(){\r\n                PubSub.subscribe('tiaozhuan',(msg,data)=>{\r\n                        this.setState({data})\r\n                        \r\n                })\r\n            }\r\n\r\n            CloseLogin=()=>{\r\n                // alert('关闭')\r\n                PubSub.publish('Close-login',false);  //发布消息\r\n            }\r\n\r\n            onFinish = (values) => {   //表单验证成功的回调\r\n                // console.log('Success:', values);\r\n                console.log(values)\r\n                reqLogin()\r\n                message.success('登陆成功')\r\n                //replace跳转到页面\r\n                this.state.data.history.replace('/admin')\r\n            };\r\n\r\n            onFinishFailed = (errorInfo) => {\r\n                console.log(errorInfo)\r\n                message.error('登陆出错,请重试')\r\n            };\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"login-bg\">\r\n                <div className=\"login-content\">\r\n                    <img src={close} alt=\"guanbi\" onClick={this.CloseLogin}/>\r\n                    <h2>用户登陆</h2>\r\n                    <Form\r\n                        // layout='inline'\r\n                        labelAlign='left'\r\n                        name=\"basic\"\r\n                        labelCol={{\r\n                            span: 7,\r\n                        }}\r\n                        wrapperCol={{\r\n                            span: 20,\r\n                        }}\r\n                        initialValues={{\r\n                            remember: true,\r\n                        }}\r\n                        onFinish={this.onFinish}\r\n                        onFinishFailed={this.onFinishFailed}\r\n                        autoComplete=\"off\"\r\n                        >\r\n                            <Form.Item\r\n                                label=\"账户\"\r\n                                name=\"username\"\r\n                                rules={[\r\n                                {required: true,message: '用户名不能为空!',},\r\n                                {min: 4,message: '用户名不低于四位',},\r\n                                {max: 12,message: '用户名最长不高于十二位',},\r\n                                {pattern:/^[a-zA-Z0-9_]+$/,message: '用户名必须是英文、数字或下划线组成',},\r\n                                ]}\r\n                            >\r\n                                {/* 高阶函数第二次调用传入的 input↓ */}\r\n                                <Input />  \r\n                            </Form.Item>\r\n\r\n                            <Form.Item\r\n                                label=\"密码\"\r\n                                name=\"password\"\r\n                                rules={[\r\n                                {required: true,message: '密码不能为空！',},\r\n                                {min: 4,message: '密码不低于四位',},\r\n                                {max: 12,message: '密码最长不高于十二位',},\r\n                                {pattern:/^[a-zA-Z0-9_]+$/,message: '密码必须是英文、数字或下划线组成',},\r\n                                ]}\r\n                            >\r\n                                <Input.Password />\r\n                            </Form.Item>\r\n\r\n\r\n\r\n                            <Form.Item\r\n                                wrapperCol={{\r\n                                offset: 8,\r\n                                span: 16,\r\n                                }}\r\n                            >\r\n                                <Button type=\"primary\" htmlType=\"submit\" className=\"login-form-button\">\r\n                                    登陆\r\n                                </Button>\r\n                            </Form.Item>\r\n                        </Form>\r\n                </div>\r\n            </div>\r\n            \r\n        )\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}