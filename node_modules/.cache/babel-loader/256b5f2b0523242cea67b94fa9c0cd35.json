{"ast":null,"code":"var _jsxFileName = \"D:\\\\\\u524D\\u7AEF\\u9879\\u76EE\\\\\\u5C1A\\u9633\\u4E92\\u52A8\\u5B98\\u7F51\\\\official-website\\\\src\\\\components\\\\fullpage\\\\fullpage.jsx\";\nimport React from \"react\";\nimport \"./fullpage.css\";\nimport PubSub from 'pubsub-js'; //引入消息订阅\n// import { throttle } from \"utils/loadash\"; //暂不节流\n//全屏滚动\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass Fullpage extends React.Component {\n  // componentDidMount() {\n  //     console.log(this.state.currentPage);\n  // }\n  // componentDidUpdate(){ //发布消息   当state状态更新就发布消息\n  //     const result = this.state.currentPage;//当前的页码\n  //     // PubSub.publish('page',result)\n  //     // console.log(result);\n  //     if(result===2){\n  //         PubSub.publish('page',result)\n  //         // this.setState({result: result});\n  //         // console.log('wdww')\n  //     }\n  // }\n  componentDidMount() {\n    PubSub.subscribe('toppage', (msg, data) => {\n      //快速跳回顶部\n      const currentPage = this.state.currentPage;\n      this.setState({\n        currentPage: data\n      }); // this.setState({data:toppage})\n      // console.log('什么',toppage)\n      // console.log(data)//固定的页码数\n      // console.log(this.aa)\n    });\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.debounceHandleScroll = e => {\n      e.persist();\n      this.handleScroll(e); // console.log(e)\n    };\n\n    this.state = {\n      currentPage: 1,\n      pageList: this.props.children\n    };\n    this.initPageListFromPropsChildren(); // 类似于vue的插槽，props带过来的children（FullpageItem）\n    // this.handleScroll = throttle(this.handleScroll, 600, true); //屏幕滚动时的节流函数\n  }\n\n  changeCurrentPage(index) {\n    this.setState({\n      currentPage: index\n    });\n  }\n\n  handleScroll(e) {\n    const result = this.state.currentPage;\n\n    if (e.deltaY > 0) {\n      PubSub.publish('page', result + 1); // console.log(e.deltaY,'鼠标往下滚动了')\n      // console.log(this.state.currentPage)-------------------------------------------\n\n      if (this.state.currentPage === this.state.pageList.length) return;\n      this.changeCurrentPage(this.state.currentPage + 1);\n    } else {\n      // console.log(e.deltaY,'鼠标往上滚动了')\n      PubSub.publish('page', result - 1);\n      if (this.state.currentPage === 1) return;\n      this.changeCurrentPage(this.state.currentPage - 1);\n    }\n  }\n\n  initPageListFromPropsChildren() {\n    // 初始化pageList（插槽）\n    if (this.state.pageList === undefined) this.setState({\n      pageList: []\n    });\n    if (typeof pageList === \"object\" && this.state.pageList.length === undefined) this.setState({\n      pageList: [this.state.pageList]\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fullpage\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"fullpage_container\",\n        onWheel: this.debounceHandleScroll,\n        children: [this.state.pageList.map((x, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `fullpage_item item_${i + 1}`,\n          style: {\n            top: -this.state.currentPage + i + 1 + \"00vh\"\n          },\n          children: x\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 21\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"point_nav\",\n          children: this.state.pageList.map((x, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"point_nav_item\",\n            style: {\n              background: i + 1 === this.state.currentPage ? \"#333\" : \"#cccaca\"\n            },\n            onMouseEnter: () => this.changeCurrentPage(i + 1)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 25\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }, this);\n  }\n\n}\n\nconst FullpageItem = props => {\n  let {\n    children\n  } = props;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      height: \"200%\",\n      width: \"100%\"\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 12\n  }, this);\n};\n\n_c = FullpageItem;\nexport { Fullpage, FullpageItem };\n\nvar _c;\n\n$RefreshReg$(_c, \"FullpageItem\");","map":{"version":3,"sources":["D:/前端项目/尚阳互动官网/official-website/src/components/fullpage/fullpage.jsx"],"names":["React","PubSub","Fullpage","Component","componentDidMount","subscribe","msg","data","currentPage","state","setState","constructor","props","debounceHandleScroll","e","persist","handleScroll","pageList","children","initPageListFromPropsChildren","changeCurrentPage","index","result","deltaY","publish","length","undefined","render","map","x","i","top","background","FullpageItem","height","width"],"mappings":"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","sourcesContent":["    import React from \"react\";\r\n    import \"./fullpage.css\";\r\n    import PubSub from 'pubsub-js' //引入消息订阅\r\n    // import { throttle } from \"utils/loadash\"; //暂不节流\r\n\r\n    //全屏滚动\r\n\r\n    class Fullpage extends React.Component {\r\n\r\n        // componentDidMount() {\r\n        //     console.log(this.state.currentPage);\r\n        // }\r\n        // componentDidUpdate(){ //发布消息   当state状态更新就发布消息\r\n        //     const result = this.state.currentPage;//当前的页码\r\n        //     // PubSub.publish('page',result)\r\n        //     // console.log(result);\r\n        //     if(result===2){\r\n        //         PubSub.publish('page',result)\r\n        //         // this.setState({result: result});\r\n        //         // console.log('wdww')\r\n        //     }\r\n        // }\r\n        componentDidMount(){\r\n            PubSub.subscribe('toppage',(msg,data)=>{ //快速跳回顶部\r\n                const currentPage = this.state.currentPage\r\n                this.setState({currentPage:data})\r\n                \r\n                \r\n                // this.setState({data:toppage})\r\n                // console.log('什么',toppage)\r\n                // console.log(data)//固定的页码数\r\n                // console.log(this.aa)\r\n            })\r\n        }\r\n\r\n\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n        currentPage: 1,\r\n        pageList: this.props.children,\r\n        };\r\n\r\n        this.initPageListFromPropsChildren(); // 类似于vue的插槽，props带过来的children（FullpageItem）\r\n        // this.handleScroll = throttle(this.handleScroll, 600, true); //屏幕滚动时的节流函数\r\n    }\r\n    debounceHandleScroll = (e) => {\r\n        e.persist();\r\n        this.handleScroll(e);\r\n        // console.log(e)\r\n    };\r\n    changeCurrentPage(index) {\r\n        this.setState({ currentPage: index });\r\n    }\r\n    handleScroll(e) {\r\n        const result = this.state.currentPage\r\n        if (e.deltaY > 0) {  \r\n            PubSub.publish('page',result+1)\r\n            // console.log(e.deltaY,'鼠标往下滚动了')\r\n            // console.log(this.state.currentPage)-------------------------------------------\r\n        if (this.state.currentPage === this.state.pageList.length) return;\r\n        this.changeCurrentPage(this.state.currentPage + 1);\r\n        } else {\r\n            // console.log(e.deltaY,'鼠标往上滚动了')\r\n            PubSub.publish('page',result-1)\r\n        if (this.state.currentPage === 1) return;\r\n        this.changeCurrentPage(this.state.currentPage - 1);\r\n        }\r\n    }\r\n    initPageListFromPropsChildren() {\r\n        // 初始化pageList（插槽）\r\n        if (this.state.pageList === undefined) this.setState({ pageList: [] });\r\n        if (\r\n        typeof pageList === \"object\" &&\r\n        this.state.pageList.length === undefined\r\n        )\r\n        this.setState({ pageList: [this.state.pageList] });\r\n    }\r\n    render() {\r\n            return (\r\n                <div className=\"fullpage\">\r\n                    <div className=\"fullpage_container\" onWheel={this.debounceHandleScroll}>\r\n                    {this.state.pageList.map((x, i) => (\r\n                    <div\r\n                        className={`fullpage_item item_${i + 1}`}\r\n                        key={i}\r\n                        style={{\r\n                        top: -this.state.currentPage + i + 1 + \"00vh\",\r\n                        }}\r\n                    >\r\n                        {x}\r\n                    </div>\r\n                    ))}\r\n                    <div className=\"point_nav\">\r\n                    {this.state.pageList.map((x, i) => (\r\n                        <div\r\n                        className=\"point_nav_item\"\r\n                        style={{\r\n                            background:\r\n                            i + 1 === this.state.currentPage ? \"#333\" : \"#cccaca\",\r\n                        }}\r\n                        key={i}\r\n                        onMouseEnter={() => this.changeCurrentPage(i + 1)}\r\n                        ></div>\r\n                    ))}\r\n                    </div>\r\n                </div>\r\n                </div>\r\n                \r\n            );\r\n            }\r\n        }\r\n    const FullpageItem = (props) => {\r\n    let { children } = props;\r\n    return <div style={{ height: \"200%\", width: \"100%\" }}>{children}</div>;\r\n    };\r\n    export { Fullpage, FullpageItem };"]},"metadata":{},"sourceType":"module"}